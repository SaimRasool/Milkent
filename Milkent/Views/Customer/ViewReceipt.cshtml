@model Milkent.Models.MdlSales
@{
    ViewBag.Title = "ViewReceipt";
}
@{
    var mdl = (Milkent.Models.MdlLogin)TempData["User"];
    var mdlCustomer = (Milkent.Models.MdlCustomer)TempData["Customer"];
}
<style id="table_style" type="text/css">

    table {
        border: 1px solid #ccc;
        border-collapse: collapse;
    }

        table th, table td {
            padding: 5px;
            border: 1px solid #ccc;
        }
</style>
<div class="pl-1">
    <table class="table table-bordered col-5" id="table">
        <thead>
            <tr align="center">
                <th colspan="9" class="h2"> Mukhtar Dairy Shop</th>
            </tr>
            <tr align="center">
                <th colspan="4"> خادم حسین</th>
                <th colspan="5"> 0302-7456238</th>
            </tr>
            <tr align="center">
                <th colspan="2">From:</th>
                <th colspan="3">@Model.ToDate.ToString(string.Format("dd/MM/yyyy"))</th>
                <th colspan="1">To:</th>
                <th colspan="3"> @Model.FromDate.ToString(string.Format("dd/MM/yyyy")) </th>
            </tr>
            <tr>
                <th colspan="2">Customer Name:</th>
                <th colspan="2">@mdlCustomer.Name</th>
                <th colspan="3">Bill No:</th>
                <th colspan="2">Purchase_@Model.ID</th>
            </tr>
            <tr>
                <th>Date</th>
                <th>شام/صبح</th>
                <th>دودھ</th>
                <th>Fat</th>
                <th>LR</th>
                <th>TS</th>
                <th>کل رقم</th>
                <th>جمع رقم</th>
                <th>بقایا</th>
            </tr>
        </thead>
        <tbody>
            @{
                var totalTS = 0.0;
                var TotalMilk = 0.0;
            }
            @foreach (var item in (List<Milkent.Models.MdlSales>)TempData["modelList"])
            {
                {
                    totalTS += item.TS;
                    TotalMilk += item.MilkCredit;
                }
                <tr>
                    <td>@item.Date.ToString(string.Format("dd/MM/yyyy"))</td>
                    <td>@item.PartOfDay</td>
                    <td>@item.MilkCredit Ltr</td>
                    <td>@item.Fat</td>
                    <td>@item.LR</td>
                    <td>@item.TS Ltr</td>
                    <td>@item.Total</td>
                    <td>@item.CashDebit</td>
                    <td>@(item.Total - item.CashDebit)</td>
                </tr>
            }
            <tr>
                <td class="font-weight-bolder" colspan="2">Total Milk</td>
                <td>@TotalMilk Ltr</td>
                <td class="font-weight-bolder" colspan="2">Total TS</td>
                <td>@totalTS Ltr</td>
                <td class="font-weight-bolder" colspan="2">Total</td>
                <td>@Model.Total</td>
            </tr>
        </tbody>
        <tfoot>
            <tr align="right">
                <td colspan="9">
                    Generated by:@mdl.UserName <i>@Model.Date.ToString(string.Format("dd/MM/yyyy"))</i>
                </td>
            </tr>
        </tfoot>
    </table>
    <button class="offset-5 m-2 btn-outline-info" onclick="PrintPanel()">Print</button>
</div>
<script type="text/javascript">

    function PrintPanel() {
        var panel = document.getElementById("table");
        var printWindow = window.open('', '', 'height=200,width=500');
        printWindow.document.write('<html><head><title></title>');
        var table_style = document.getElementById("table_style").innerHTML;
        printWindow.document.write('<style type = "text/css">');
        printWindow.document.write(table_style);
        printWindow.document.write('</style>');
        printWindow.document.write('</head>');
        printWindow.document.write('<body>');
        printWindow.document.write(panel.outerHTML);
        printWindow.document.write('</body>');
        printWindow.document.write('</html>');
        printWindow.document.close();

        setTimeout(function () {
            printWindow.print();
        }, 500);
        return false;
    }
</script>